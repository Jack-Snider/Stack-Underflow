


CREATE TABLE ADMINS
(
	ADMIN_ID              VARCHAR2(100)  NOT NULL ,
	ADMIN_NM              VARCHAR2(100)  NOT NULL ,
	ADMIN_PASS            VARCHAR2(100)  NOT NULL 
);



CREATE UNIQUE INDEX XPK관리자 ON ADMINS
(ADMIN_ID  ASC);



ALTER TABLE ADMINS
	ADD CONSTRAINT  XPK관리자 PRIMARY KEY (ADMIN_ID);



CREATE TABLE CHAT
(
	CHAT_ROOM_NUM         NUMBER  NOT NULL ,
	CHAT_ROOM_NM          VARCHAR2(100)  NOT NULL ,
	CHAT_CRT_DATE         DATE  NULL ,
	MEM_ID                VARCHAR2(100)  NULL 
);



CREATE UNIQUE INDEX XPK채팅방 ON CHAT
(CHAT_ROOM_NUM  ASC);



ALTER TABLE CHAT
	ADD CONSTRAINT  XPK채팅방 PRIMARY KEY (CHAT_ROOM_NUM);



CREATE TABLE CHAT_CONTENT
(
	CHAT_CONT_WRT         VARCHAR2(100)  NOT NULL ,
	CHAT_CONT_CONT        VARCHAR2(1000)  NULL ,
	CHAT_CONT_TIME        DATE  NOT NULL ,
	CHAT_ROOM_NUM         NUMBER  NOT NULL ,
	CHAT_CONT_SRLNUM      VARCHAR2(100)  NOT NULL 
);



CREATE UNIQUE INDEX XPK채팅내용 ON CHAT_CONTENT
(CHAT_ROOM_NUM  ASC,CHAT_CONT_SRLNUM  ASC);



ALTER TABLE CHAT_CONTENT
	ADD CONSTRAINT  XPK채팅내용 PRIMARY KEY (CHAT_ROOM_NUM,CHAT_CONT_SRLNUM);



CREATE TABLE CMNT
(
	CMNT_NUM              NUMBER  NOT NULL ,
	CMNT_DATE             DATE  NOT NULL ,
	CMNT_UDT_DATE         DATE  NOT NULL ,
	CMNT_CONT             VARCHAR2(1000)  NULL ,
	CMNT_LIKE             NUMBER  NOT NULL ,
	POST_NUM              NUMBER  NOT NULL ,
	CMNT_DISLIKE          NUMBER  NOT NULL ,
	MEM_ID                VARCHAR2(100)  NOT NULL 
);



CREATE UNIQUE INDEX XPK게시판_댓글 ON CMNT
(CMNT_NUM  ASC);



ALTER TABLE CMNT
	ADD CONSTRAINT  XPK게시판_댓글 PRIMARY KEY (CMNT_NUM);



CREATE TABLE FILES
(
	FILE_NUM              NUMBER  NOT NULL ,
	FILE_NAME             VARCHAR2(100)  NOT NULL ,
	FILE_EXT              VARCHAR2(100)  NOT NULL ,
	FILE_SIZE             VARCHAR2(100)  NOT NULL ,
	FILE_ETC              VARCHAR2(1000)  NULL 
);



CREATE UNIQUE INDEX XPK파일 ON FILES
(FILE_NUM  ASC);



ALTER TABLE FILES
	ADD CONSTRAINT  XPK파일 PRIMARY KEY (FILE_NUM);



CREATE TABLE MNG
(
	MEM_ID                VARCHAR2(100)  NOT NULL ,
	ADMIN_ID              VARCHAR2(100)  NOT NULL ,
	MNG_TYPE_CD           VARCHAR2(100)  NOT NULL ,
	MNG_DATE              DATE  NOT NULL ,
	MNG_TRG               VARCHAR2(100)  NOT NULL ,
	MNG_CONT              VARCHAR2(1000)  NOT NULL ,
	MNG_CD                VARCHAR2(100)  NOT NULL 
);



CREATE UNIQUE INDEX XPK회원관리 ON MNG
(MNG_CD  ASC);



ALTER TABLE MNG
	ADD CONSTRAINT  XPK회원관리 PRIMARY KEY (MNG_CD);



CREATE TABLE MANAGE_TYPE
(
	MNG_TYPE_CD           VARCHAR2(100)  NOT NULL ,
	MNG_TYPE_NM           VARCHAR2(100)  NOT NULL 
);



CREATE UNIQUE INDEX XPK관리유형 ON MANAGE_TYPE
(MNG_TYPE_CD  ASC);



ALTER TABLE MANAGE_TYPE
	ADD CONSTRAINT  XPK관리유형 PRIMARY KEY (MNG_TYPE_CD);



CREATE TABLE MEMBER
(
	MEM_ID                VARCHAR2(100)  NOT NULL ,
	MEM_NM                VARCHAR2(100)  NOT NULL ,
	MEM_PASS              VARCHAR2(100)  NOT NULL ,
	MEM_REGNO             VARCHAR2(100)  NOT NULL ,
	MEM_NKNM              VARCHAR2(100)  NOT NULL ,
	MEM_EMAIL             VARCHAR2(100)  NOT NULL ,
	MEM_ADDR              VARCHAR2(1000)  NULL ,
	MEM_QSTN              VARCHAR2(100)  NOT NULL ,
	MEM_SNU_DATE          DATE  NOT NULL ,
	MEM_RANK              VARCHAR2(100)  NOT NULL ,
	MEM_SCORE             NUMBER  NOT NULL ,
	MEM_STAT              NUMBER  NOT NULL ,
	MEM_ANS               VARCHAR2(1000)  NULL ,
	FILE_NUM              NUMBER  NOT NULL 
);



CREATE UNIQUE INDEX XPK회원 ON MEMBER
(MEM_ID  ASC);



ALTER TABLE MEMBER
	ADD CONSTRAINT  XPK회원 PRIMARY KEY (MEM_ID);



CREATE TABLE POST
(
	POST_NUM              NUMBER  NOT NULL ,
	POST_TITLE            VARCHAR2(100)  NOT NULL ,
	POST_CONT             VARCHAR2(1000)  NOT NULL ,
	POST_REG_DATE         DATE  NOT NULL ,
	POST_VIEWS            NUMBER  NOT NULL ,
	POST_LIKE             NUMBER  NOT NULL ,
	POST_DISLIKE          NUMBER  NOT NULL ,
	POST_UDT_DATE         DATE  NOT NULL ,
	FILE_NUM              NUMBER  NULL ,
	MEM_ID                VARCHAR2(100)  NOT NULL ,
	POST_BOARD_TYPE       VARCHAR2(100)  NOT NULL 
);



CREATE UNIQUE INDEX XPK게시판_게시글 ON POST
(POST_NUM  ASC);



ALTER TABLE POST
	ADD CONSTRAINT  XPK게시판_게시글 PRIMARY KEY (POST_NUM);


------------------------------------------------------------------------------------------------
ALTER TABLE CHAT
	ADD (CONSTRAINT  R_37 FOREIGN KEY (MEM_ID) REFERENCES MEMBER(MEM_ID) ON DELETE SET NULL);



ALTER TABLE CHAT
	ADD (CONSTRAINT  R_51 FOREIGN KEY (MEM_ID) REFERENCES MEMBER(MEM_ID) ON DELETE SET NULL);
------------------------------------------------------------------------------------------------


ALTER TABLE CHAT_CONTENT
	ADD (CONSTRAINT  R_40 FOREIGN KEY (CHAT_ROOM_NUM) REFERENCES CHAT(CHAT_ROOM_NUM));



ALTER TABLE CMNT
	ADD (CONSTRAINT  R_44 FOREIGN KEY (POST_NUM) REFERENCES POST(POST_NUM) ON DELETE SET NULL);



ALTER TABLE CMNT
	ADD (CONSTRAINT  R_50 FOREIGN KEY (MEM_ID) REFERENCES MEMBER(MEM_ID) ON DELETE SET NULL);



ALTER TABLE MNG
	ADD (CONSTRAINT  R_16 FOREIGN KEY (MEM_ID) REFERENCES MEMBER(MEM_ID));



ALTER TABLE MNG
	ADD (CONSTRAINT  R_18 FOREIGN KEY (ADMIN_ID) REFERENCES ADMINS(ADMIN_ID));



ALTER TABLE MNG
	ADD (CONSTRAINT  R_49 FOREIGN KEY (MNG_TYPE_CD) REFERENCES MANAGE_TYPE(MNG_TYPE_CD) ON DELETE SET NULL);



ALTER TABLE MEMBER
	ADD (CONSTRAINT  R_42 FOREIGN KEY (FILE_NUM) REFERENCES FILES(FILE_NUM) ON DELETE SET NULL);



ALTER TABLE POST
	ADD (CONSTRAINT  R_43 FOREIGN KEY (FILE_NUM) REFERENCES FILES(FILE_NUM) ON DELETE SET NULL);



ALTER TABLE POST
	ADD (CONSTRAINT  R_45 FOREIGN KEY (MEM_ID) REFERENCES MEMBER(MEM_ID) ON DELETE SET NULL);


